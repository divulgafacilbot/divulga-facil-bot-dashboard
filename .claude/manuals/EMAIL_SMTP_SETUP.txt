═══════════════════════════════════════════════════════════════
EMAIL SMTP SETUP - COMPLETE GUIDE (Resend)
═══════════════════════════════════════════════════════════════

Generated: 2025-12-24
For project: Posting Bot SaaS

This manual will guide you through setting up email sending using
Resend (recommended) or alternative SMTP providers.

═══════════════════════════════════════════════════════════════
OVERVIEW
═══════════════════════════════════════════════════════════════

What you will accomplish:
- Create a Resend account (free tier available)
- Get your Resend API key
- Configure SMTP credentials in .env
- Test that emails can be sent

What you will need:
- An email address (for registration)
- A web browser
- 5-10 minutes of time

Estimated time: 5-10 minutes

NOTE: Your project already uses Resend. This guide shows you how
      to get your API key if you need it again or want to create
      a new one.

═══════════════════════════════════════════════════════════════
METHOD 1: RESEND (RECOMMENDED)
═══════════════════════════════════════════════════════════════

Resend is a modern email API specifically designed for developers.
It has a generous free tier and excellent deliverability.

Free tier includes:
- 3,000 emails/month
- 100 emails/day
- All features included

STEP 1: Create Resend Account

1.1 - Open your web browser

1.2 - Navigate to: https://resend.com

1.3 - Click the "Start Building" or "Sign Up" button
      (usually in the top right corner)

1.4 - You will see sign-up options:
      - Sign up with GitHub (recommended, faster)
      - Sign up with Email

1.5 - Choose your preferred method:

      If using GitHub:
      1.5a - Click "Continue with GitHub"
      1.5b - Authorize Resend to access your GitHub account
      1.5c - You'll be redirected back to Resend dashboard

      If using Email:
      1.5a - Enter your email address
      1.5b - Enter a strong password
      1.5c - Click "Create Account"
      1.5d - Check your email inbox
      1.5e - Click the verification link in the email
      1.5f - You'll be redirected to Resend dashboard

EXPECTED RESULT: You are logged into Resend dashboard

TROUBLESHOOTING:
- If verification email doesn't arrive: check spam folder
- If GitHub auth fails: try email sign-up instead

───────────────────────────────────────────────────────────────

STEP 2: Navigate to API Keys

2.1 - You should now see the Resend dashboard

2.2 - Look in the left sidebar for navigation menu

2.3 - Click on "API Keys"
      (usually has a key icon next to it)

2.4 - You will see the API Keys page with:
      - List of existing API keys (probably empty)
      - Button to create new API key

EXPECTED RESULT: You are on the API Keys page

───────────────────────────────────────────────────────────────

STEP 3: Create API Key

3.1 - Click the "Create API Key" button
      (usually blue button in top right)

3.2 - A dialog will appear asking for:
      - Name (required)
      - Permission (Full Access or Sending Access)
      - Domain (optional)

3.3 - Fill in the form:

      Name:
      - Type: "Posting Bot Production"
      - Or: "Posting Bot Development" (if for testing)
      - This is just a label for you to identify the key

      Permission:
      - Select: "Sending Access" (recommended)
      - This gives permission to send emails only
      - "Full Access" is not needed for this project

      Domain:
      - Leave blank for now (optional)
      - You can add your domain later

3.4 - Click "Create" or "Add" button

3.5 - IMMEDIATELY you will see your API key displayed:

      ┌─────────────────────────────────────────────────┐
      │ Your API Key                                    │
      │                                                 │
      │ re_1234567890abcdefghijklmnopqrstuvwxyz        │
      │                                                 │
      │ ⚠️  This key will only be shown once!           │
      │    Copy it now and store it securely.          │
      │                                                 │
      │ [Copy to Clipboard]                             │
      └─────────────────────────────────────────────────┘

EXPECTED RESULT: API key is displayed (starts with "re_")

CRITICAL: This key is shown ONLY ONCE! If you close this dialog
         without copying it, you'll have to create a new key.

───────────────────────────────────────────────────────────────

STEP 4: SAVE YOUR API KEY (CRITICAL!)

4.1 - Click the "Copy to Clipboard" button
      OR
      Manually select and copy the entire key

4.2 - The key format is:
      re_[random letters and numbers]

      Example: re_1A2b3C4d_5E6f7G8h9I0jKlMnOpQrStUvWxYz

4.3 - IMMEDIATELY paste it somewhere safe:
      - In a password manager (recommended)
      - In a secure notes app
      - In a text file called "resend-api-key.txt"

4.4 - VERIFY the key is complete:
      - Should start with "re_"
      - Should be approximately 40+ characters
      - Contains letters, numbers, and underscores

4.5 - After copying, click "Done" or "Close"

CRITICAL: DO NOT share this API key with anyone!
         It allows sending emails from your account!

EXPECTED RESULT: API key saved safely

TROUBLESHOOTING:
- If you lost the key: delete it and create a new one
- If key doesn't work: check for extra spaces when copying

───────────────────────────────────────────────────────────────

STEP 5: Configure .env File

5.1 - Navigate to your project folder:
      /home/pedro/Desktop/Repositórios/5 Freelances/Posting-bot/implementation

5.2 - Open: apps/api/.env
      (in text editor like VS Code, Sublime, or nano)

5.3 - Find the EMAIL section:
      EMAIL_SMTP_HOST=
      EMAIL_SMTP_PORT=
      EMAIL_SMTP_USER=
      EMAIL_SMTP_PASS=
      EMAIL_FROM=

5.4 - Update with Resend values:

      EMAIL_SMTP_HOST=smtp.resend.com
      EMAIL_SMTP_PORT=587
      EMAIL_SMTP_USER=resend
      EMAIL_SMTP_PASS=re_[your_api_key_here]
      EMAIL_FROM=onboarding@resend.dev

      IMPORTANT:
      - EMAIL_SMTP_HOST is always: smtp.resend.com
      - EMAIL_SMTP_PORT is always: 587
      - EMAIL_SMTP_USER is always: resend
      - EMAIL_SMTP_PASS is your API key (paste the key you copied)
      - EMAIL_FROM can be: onboarding@resend.dev (Resend's test domain)

5.5 - Replace [your_api_key_here] with your actual API key

      Example:
      EMAIL_SMTP_PASS=re_gXUSgDFY_5PEiD4usaGLqpC2kHQvP5132

      NO SPACES!
      NO QUOTES!

5.6 - Save the file
      - Ctrl+S (Windows/Linux) or Cmd+S (Mac)

5.7 - Close the text editor

EXPECTED RESULT: .env file contains Resend SMTP configuration

═══════════════════════════════════════════════════════════════
STEP 6: (OPTIONAL) Add Your Custom Domain
═══════════════════════════════════════════════════════════════

If you want to send emails from your own domain (e.g., no-reply@yourdomain.com)
instead of Resend's test domain, you need to verify your domain.

6.1 - In Resend dashboard, go to "Domains" in left sidebar

6.2 - Click "Add Domain"

6.3 - Enter your domain name
      Example: yourdomain.com

6.4 - Click "Add"

6.5 - Resend will show you DNS records to add:
      - SPF record (TXT)
      - DKIM record (TXT)
      - DMARC record (TXT)

6.6 - Go to your domain registrar (GoDaddy, Namecheap, etc.)

6.7 - Add the DNS records exactly as shown by Resend

6.8 - Wait 24-48 hours for DNS propagation

6.9 - Return to Resend dashboard and click "Verify Domain"

6.10 - Once verified, update EMAIL_FROM in .env:
       EMAIL_FROM=no-reply@yourdomain.com

NOTE: This step is OPTIONAL. You can use Resend's test domain
      (onboarding@resend.dev) for development and testing.

═══════════════════════════════════════════════════════════════
METHOD 2: ALTERNATIVE SMTP PROVIDERS
═══════════════════════════════════════════════════════════════

If you prefer a different email service, here are alternatives:

───────────────────────────────────────────────────────────────
OPTION A: SendGrid
───────────────────────────────────────────────────────────────

Free tier: 100 emails/day

Setup:
1. Go to: https://sendgrid.com
2. Sign up for free account
3. Navigate to Settings → API Keys
4. Create new API key with "Mail Send" permission
5. Copy the API key

.env configuration:
EMAIL_SMTP_HOST=smtp.sendgrid.net
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=apikey
EMAIL_SMTP_PASS=[your_sendgrid_api_key]
EMAIL_FROM=your-email@yourdomain.com

───────────────────────────────────────────────────────────────
OPTION B: Gmail SMTP
───────────────────────────────────────────────────────────────

Free tier: 500 emails/day (with Google Workspace)
Personal Gmail: 100-150 emails/day

Setup:
1. Go to: https://myaccount.google.com/security
2. Enable 2-Step Verification
3. Go to: https://myaccount.google.com/apppasswords
4. Generate an App Password for "Mail"
5. Copy the 16-character password

.env configuration:
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=your-email@gmail.com
EMAIL_SMTP_PASS=[your_app_password]
EMAIL_FROM=your-email@gmail.com

NOTE: Gmail has strict sending limits and may mark emails as spam.
      Not recommended for production use.

───────────────────────────────────────────────────────────────
OPTION C: Mailgun
───────────────────────────────────────────────────────────────

Free tier: 5,000 emails/month (first 3 months)

Setup:
1. Go to: https://mailgun.com
2. Sign up for free account
3. Navigate to Sending → Domain Settings → SMTP Credentials
4. Create SMTP credentials
5. Copy username and password

.env configuration:
EMAIL_SMTP_HOST=smtp.mailgun.org
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=[your_mailgun_username]
EMAIL_SMTP_PASS=[your_mailgun_password]
EMAIL_FROM=no-reply@your-domain.com

═══════════════════════════════════════════════════════════════
VALIDATION CHECKLIST
═══════════════════════════════════════════════════════════════

Before proceeding, verify:

✓ Resend account created successfully
✓ API key generated and starts with "re_"
✓ API key saved in secure location
✓ apps/api/.env contains EMAIL_SMTP_* variables
✓ EMAIL_SMTP_HOST is set to smtp.resend.com
✓ EMAIL_SMTP_PORT is set to 587
✓ EMAIL_SMTP_USER is set to resend
✓ EMAIL_SMTP_PASS contains your API key
✓ EMAIL_FROM is set (onboarding@resend.dev or your domain)

═══════════════════════════════════════════════════════════════
TESTING YOUR EMAIL SETUP
═══════════════════════════════════════════════════════════════

After deploying your API, test email sending:

1. Trigger a password reset in your app
2. Check that you receive the email
3. Check spam folder if email doesn't arrive
4. Verify email content looks correct
5. Test clicking links in the email

If emails don't arrive:
- Check Resend dashboard → Logs
- Look for error messages
- Verify API key is correct in .env
- Ensure EMAIL_FROM domain is verified (if using custom domain)

═══════════════════════════════════════════════════════════════
WHAT TO DO NEXT
═══════════════════════════════════════════════════════════════

After completing this manual:

1. Your Resend SMTP is configured in: apps/api/.env

2. Verify your configuration:
   - Run: /validate-env
   - This will confirm all EMAIL_SMTP_* variables are set

3. When you deploy your API:
   - Password reset emails will be sent via Resend
   - Email verification will work
   - All transactional emails will work

4. Monitor your usage:
   - Log into Resend dashboard regularly
   - Check: Dashboard → Analytics
   - Free tier: 3,000 emails/month
   - If you exceed: upgrade to paid plan or reduce sending

5. Best practices:
   - Don't share your API key
   - Rotate API keys every 6 months
   - Monitor bounce rates and spam complaints
   - Keep unsubscribe functionality working
   - Only send emails users requested

═══════════════════════════════════════════════════════════════
REFERENCE
═══════════════════════════════════════════════════════════════

Resend Resources:
- Dashboard: https://resend.com/dashboard
- Documentation: https://resend.com/docs
- API Reference: https://resend.com/docs/api-reference
- Status Page: https://status.resend.com
- Support: support@resend.com

SMTP Configuration Quick Reference:

Resend:
  Host: smtp.resend.com
  Port: 587
  User: resend
  Pass: [API key starting with re_]
  From: onboarding@resend.dev

SendGrid:
  Host: smtp.sendgrid.net
  Port: 587
  User: apikey
  Pass: [SendGrid API key]

Gmail:
  Host: smtp.gmail.com
  Port: 587
  User: [your email]
  Pass: [App Password]

Mailgun:
  Host: smtp.mailgun.org
  Port: 587
  User: [Mailgun username]
  Pass: [Mailgun password]

═══════════════════════════════════════════════════════════════
TROUBLESHOOTING
═══════════════════════════════════════════════════════════════

Issue: Emails not sending
Solution:
  1. Check Resend dashboard → Logs for errors
  2. Verify API key is correct
  3. Ensure no extra spaces in .env file
  4. Test with a simple curl request

Issue: Emails going to spam
Solution:
  1. Verify your domain (add SPF/DKIM records)
  2. Use a reputable "From" address
  3. Keep email content professional
  4. Avoid spam trigger words

Issue: "Authentication failed"
Solution:
  1. Regenerate API key in Resend dashboard
  2. Update .env with new key
  3. Restart your API server

Issue: Rate limit exceeded
Solution:
  1. Check your sending volume in Resend dashboard
  2. Upgrade to paid plan if needed
  3. Implement email queueing to spread out sends

Issue: Lost API key
Solution:
  1. Go to Resend → API Keys
  2. Delete the old key
  3. Create a new key
  4. Update .env with new key

═══════════════════════════════════════════════════════════════
END OF MANUAL
═══════════════════════════════════════════════════════════════
